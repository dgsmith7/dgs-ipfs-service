<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <title>Smitty's IPFs pinning service and API - Node</title>
  <meta name="author" content="David G. Smith" />
  <meta name="description" content="A node details page for Smitty's IPFS node" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Oxanium:wght@500&display=swap"
    rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    crossorigin="anonymous" />
  <link rel="stylesheet" href="/css/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <%- include('header'); %>
  <!-- Splash page -->
  <div id="splashbox" class="container-fluid sticky-top w-100">
    <div id="splash">
      <div class="spacer"></div>
    </div>
  </div>
  <main class="container my-5">
    <h1 class="text-center mb-4">Node</h1>
    <!-- Node ID display row -->
    <div class="row mb-4">
      <div class="col-12 text-center">
        <div id="node-id-display" class="fs-4 fw-bold"></div>
        <div class="fs-6 fw-bold">Consider supporting this node with a donation. Button in footer.</div>
      </div>
    </div>
    <!-- Visualizations Section: five sections -->
    <section id="visualizations" class="mb-5">
      <!-- Top row: Node Info, Bitswap Stats, Provide Stats -->
      <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
        <!-- Cell: Node Info -->
        <div class="col">
          <div class="border text-center d-flex flex-column justify-content-center align-items-center"
            style="aspect-ratio: 1;">
            <div class="fw-bold mb-2">Node Info</div>
            <p id="node-info" class="fs-6">...loading node info...</p>
          </div>
        </div>
        <!-- Cell: Bitswap Stats -->
        <div class="col">
          <div class="border text-center d-flex flex-column justify-content-center align-items-center"
            style="aspect-ratio: 1;">
            <div class="fw-bold mb-2">Bitswap Stats</div>
            <p id="bitswap-info" class="fs-6">...loading bitswap stats...</p>
          </div>
        </div>
        <!-- Cell: Provide Stats -->
        <div class="col">
          <div class="border text-center d-flex flex-column justify-content-center align-items-center"
            style="aspect-ratio: 1;">
            <div class="fw-bold mb-2">Provide Stats</div>
            <p id="provide-info" class="fs-6">...loading provide stats...</p>
          </div>
        </div>
      </div>
      <!-- Bottom row: Disk Space and Bandwidth Stats -->
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <!-- Cell: Disk Space -->
        <div class="col">
          <div class="border text-center d-flex flex-column justify-content-center align-items-center"
            style="aspect-ratio: 1;">
            <div class="fw-bold mb-2">Disk Space</div>
            <canvas id="diskChart" style="max-width:80%; max-height:80%;" class="mx-auto d-block"></canvas>
          </div>
        </div>
        <!-- Cell: Bandwidth Stats -->
        <div class="col">
          <div class="border text-center d-flex flex-column justify-content-center align-items-center"
            style="aspect-ratio: 1;">
            <div class="fw-bold mb-2">Bandwidth Stats</div>
            <canvas id="bandwidthTotalChart" style="max-width:80%; max-height:40%;" class="mx-auto d-block"></canvas>
            <canvas id="bandwidthRateChart" style="max-width:80%; max-height:40%;"
              class="mx-auto d-block mt-2"></canvas>
          </div>
        </div>
      </div>
    </section>
    <div id="stats" class="d-none"><%= JSON.stringify(nodeStats) %></div>

  </main>
  <%- include('footer'); %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
  <script type="module" src="../js/nodeInfo.js"></script>
</body>

</html>